@page "/dashboard"

<PageTitle>Comunidad Docente - FIME</PageTitle>

<div class="community-dashboard">
    <div class="dashboard-header">
        <h1>üéì Comunidad Docente FIME</h1>
        <p>Conecta con profesores, explora materias y participa en la comunidad</p>
    </div>
    
    <!-- Estad√≠sticas de la comunidad -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon">üë®‚Äçüè´</div>
            <div class="stat-content">
                <h3>Profesores</h3>
                <p class="stat-number">@profesoresCount</p>
                <span class="stat-label">Activos en la comunidad</span>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">üìö</div>
            <div class="stat-content">
                <h3>Materias</h3>
                <p class="stat-number">@materiasCount</p>
                <span class="stat-label">Disponibles</span>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">üí¨</div>
            <div class="stat-content">
                <h3>Comentarios</h3>
                <p class="stat-number">@comentariosCount</p>
                <span class="stat-label">Esta semana</span>
            </div>
        </div>
        
        <div class="stat-card">
            <div class="stat-icon">‚≠ê</div>
            <div class="stat-content">
                <h3>Evaluaciones</h3>
                <p class="stat-number">@evaluacionesCount</p>
                <span class="stat-label">Promedio: 4.5/5</span>
            </div>
        </div>
    </div>

    <!-- Lista de Profesores Destacados -->
    <div class="section">
        <div class="section-header">
            <h2>üëë Profesores Destacados</h2>
            <button class="btn-link" @onclick="ToggleProfesores">
                @(mostrarTodosProfesores ? "Ver menos" : "Ver todos")
            </button>
        </div>
        
        <div class="profesores-grid">
            @foreach (var profesor in (mostrarTodosProfesores ? profesores : profesores.Take(6)))
            {
                <div class="profesor-card" @onclick="() => SeleccionarProfesor(profesor)">
                    <div class="profesor-avatar">
                        <img src="@profesor.Avatar" alt="@profesor.Nombre" />
                        <div class="profesor-status @(profesor.EnLinea ? "online" : "offline")"></div>
                    </div>
                    <div class="profesor-info">
                        <h4>@profesor.Nombre</h4>
                        <p class="profesor-titulo">@profesor.Titulo</p>
                        <div class="profesor-materias">
                            @foreach (var materia in profesor.Materias.Take(2))
                            {
                                <span class="materia-tag">@materia</span>
                            }
                            @if (profesor.Materias.Count > 2)
                            {
                                <span class="materia-tag more">+@(profesor.Materias.Count - 2)</span>
                            }
                        </div>
                        <div class="profesor-rating">
                            @for (int i = 1; i <= 5; i++)
                            {
                                <span class="star @(i <= profesor.Rating ? "filled" : "")">‚≠ê</span>
                            }
                            <span class="rating-text">(@profesor.NumeroEvaluaciones)</span>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>

    <!-- Materias Populares -->
    <div class="section">
        <div class="section-header">
            <h2>üìñ Materias Populares</h2>
            <select class="filter-select" @onchange="FiltrarMaterias">
                <option value="">Todas las carreras</option>
                <option value="Ingenier√≠a Civil">Ingenier√≠a Civil</option>
                <option value="Ingenier√≠a Mec√°nica">Ingenier√≠a Mec√°nica</option>
                <option value="Ingenier√≠a Industrial">Ingenier√≠a Industrial</option>
                <option value="Ingenier√≠a El√©ctrica">Ingenier√≠a El√©ctrica</option>
            </select>
        </div>
        
        <div class="materias-grid">
            @foreach (var materia in materiasFiltradas)
            {
                <div class="materia-card">
                    <div class="materia-header">
                        <h4>@materia.Nombre</h4>
                        <span class="materia-codigo">@materia.Codigo</span>
                    </div>
                    <p class="materia-carrera">@materia.Carrera</p>
                    <div class="materia-profesores">
                        <strong>Profesores:</strong>
                        @string.Join(", ", materia.Profesores)
                    </div>
                    <div class="materia-stats">
                        <span class="stat-item">üë• @materia.NumeroEstudiantes estudiantes</span>
                        <span class="stat-item">‚≠ê @materia.Rating.ToString("F1")</span>
                    </div>
                </div>
            }
        </div>
    </div>

    <!-- Muro de Comentarios -->
    <div class="section">
        <div class="section-header">
            <h2>üí¨ Muro de la Comunidad</h2>
            <button class="btn-primary" @onclick="MostrarFormularioComentario">
                ‚úçÔ∏è Nuevo comentario
            </button>
        </div>
        
        @if (mostrarFormComentario)
        {
            <div class="comment-form">
                <div class="form-group">
                    <textarea @bind="nuevoComentario" placeholder="Comparte algo con la comunidad..." rows="3"></textarea>
                </div>
                <div class="form-actions">
                    <button class="btn-primary" @onclick="PublicarComentario">Publicar</button>
                    <button class="btn-secondary" @onclick="CancelarComentario">Cancelar</button>
                </div>
            </div>
        }
        
        <!-- Plugin de comentarios de Facebook -->
        <div class="facebook-comments-section">
            <h3>üíô Comentarios de Facebook</h3>
            <div class="facebook-plugin-placeholder">
                <!-- Aqu√≠ ir√≠a el plugin de Facebook Comments -->
                <div class="fb-comments-mockup">
                    <div class="fb-header">
                        <span>üí¨ Comentarios de Facebook</span>
                        <span class="fb-count">12 comentarios</span>
                    </div>
                    <div class="fb-login-prompt">
                        <p>üîê Inicia sesi√≥n con Facebook para comentar</p>
                        <button class="fb-login-btn">Conectar con Facebook</button>
                    </div>
                    <div class="fb-comments-preview">
                        <div class="fb-comment">
                            <div class="fb-avatar">üë§</div>
                            <div class="fb-comment-content">
                                <strong>Mar√≠a Gonz√°lez</strong>
                                <p>Excelente iniciativa para conectar a la comunidad docente! üëè</p>
                                <div class="fb-comment-actions">
                                    <span>Me gusta</span> ¬∑ <span>Responder</span> ¬∑ <span>2h</span>
                                </div>
                            </div>
                        </div>
                        <div class="fb-comment">
                            <div class="fb-avatar">üë§</div>
                            <div class="fb-comment-content">
                                <strong>Dr. Roberto Mart√≠nez</strong>
                                <p>¬øAlguien tiene experiencia con el nuevo plan de estudios de Mec√°nica?</p>
                                <div class="fb-comment-actions">
                                    <span>Me gusta</span> ¬∑ <span>Responder</span> ¬∑ <span>4h</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Comentarios locales -->
        <div class="local-comments">
            @foreach (var comentario in comentarios)
            {
                <div class="comment-card">
                    <div class="comment-header">
                        <div class="comment-avatar">
                            <img src="@comentario.Avatar" alt="@comentario.Autor" />
                        </div>
                        <div class="comment-info">
                            <h5>@comentario.Autor</h5>
                            <span class="comment-time">@comentario.Fecha.ToString("dd/MM/yyyy HH:mm")</span>
                        </div>
                    </div>
                    <div class="comment-content">
                        <p>@comentario.Contenido</p>
                    </div>
                    <div class="comment-actions">
                        <button class="btn-like @(comentario.MeGusta ? "liked" : "")" @onclick="() => ToggleLike(comentario)">
                            üëç @comentario.Likes
                        </button>
                        <button class="btn-reply" @onclick="() => ResponderComentario(comentario)">
                            üí¨ Responder
                        </button>
                    </div>
                </div>
            }
        </div>
    </div>
</div>

<style>
    .community-dashboard {
        max-width: 1200px;
        margin: 0 auto;
        padding: 1rem;
    }
    
    .dashboard-header {
        text-align: center;
        margin-bottom: 2rem;
    }
    
    .dashboard-header h1 {
        font-size: 2.5rem;
        color: #2c3e50;
        margin-bottom: 0.5rem;
    }
    
    .dashboard-header p {
        color: #7f8c8d;
        font-size: 1.2rem;
    }
    
    /* Estad√≠sticas */
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1.5rem;
        margin-bottom: 3rem;
    }
    
    .stat-card {
        background: white;
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        display: flex;
        align-items: center;
        gap: 1rem;
        transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .stat-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }
    
    .stat-icon {
        font-size: 2.5rem;
        width: 60px;
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #f8f9fa;
        border-radius: 50%;
    }
    
    .stat-content h3 {
        font-size: 1rem;
        color: #6c757d;
        margin-bottom: 0.5rem;
    }
    
    .stat-number {
        font-size: 2rem;
        font-weight: 700;
        color: #3498db;
        margin: 0;
    }
    
    .stat-label {
        font-size: 0.875rem;
        color: #95a5a6;
    }
    
    /* Secciones */
    .section {
        margin-bottom: 3rem;
    }
    
    .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
    }
    
    .section-header h2 {
        font-size: 1.8rem;
        color: #2c3e50;
        margin: 0;
    }
    
    /* Profesores */
    .profesores-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
    }
    
    .profesor-card {
        background: white;
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        cursor: pointer;
        transition: all 0.2s;
    }
    
    .profesor-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
    }
    
    .profesor-avatar {
        position: relative;
        width: 60px;
        height: 60px;
        margin-bottom: 1rem;
    }
    
    .profesor-avatar img {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        object-fit: cover;
    }
    
    .profesor-status {
        position: absolute;
        bottom: 2px;
        right: 2px;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        border: 2px solid white;
    }
    
    .profesor-status.online {
        background: #27ae60;
    }
    
    .profesor-status.offline {
        background: #95a5a6;
    }
    
    .profesor-info h4 {
        font-size: 1.2rem;
        color: #2c3e50;
        margin-bottom: 0.25rem;
    }
    
    .profesor-titulo {
        color: #7f8c8d;
        font-size: 0.9rem;
        margin-bottom: 1rem;
    }
    
    .profesor-materias {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-bottom: 1rem;
    }
    
    .materia-tag {
        background: #e3f2fd;
        color: #1976d2;
        padding: 0.25rem 0.5rem;
        border-radius: 12px;
        font-size: 0.8rem;
    }
    
    .materia-tag.more {
        background: #f5f5f5;
        color: #666;
    }
    
    .profesor-rating {
        display: flex;
        align-items: center;
        gap: 0.25rem;
    }
    
    .star {
        font-size: 1rem;
    }
    
    .star.filled {
        color: #ffc107;
    }
    
    .rating-text {
        font-size: 0.8rem;
        color: #6c757d;
        margin-left: 0.5rem;
    }
    
    /* Materias */
    .materias-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 1.5rem;
    }
    
    .materia-card {
        background: white;
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        transition: transform 0.2s;
    }
    
    .materia-card:hover {
        transform: translateY(-2px);
    }
    
    .materia-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 0.5rem;
    }
    
    .materia-header h4 {
        color: #2c3e50;
        margin: 0;
        flex: 1;
    }
    
    .materia-codigo {
        background: #f8f9fa;
        color: #6c757d;
        padding: 0.25rem 0.5rem;
        border-radius: 6px;
        font-size: 0.8rem;
        font-weight: 600;
    }
    
    .materia-carrera {
        color: #3498db;
        font-weight: 500;
        margin-bottom: 1rem;
    }
    
    .materia-profesores {
        margin-bottom: 1rem;
        font-size: 0.9rem;
    }
    
    .materia-stats {
        display: flex;
        gap: 1rem;
    }
    
    .stat-item {
        font-size: 0.85rem;
        color: #6c757d;
    }
    
    /* Comentarios */
    .comment-form {
        background: white;
        border-radius: 12px;
        padding: 1.5rem;
        margin-bottom: 2rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    
    .form-group textarea {
        width: 100%;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 0.75rem;
        font-family: inherit;
        resize: vertical;
    }
    
    .form-actions {
        display: flex;
        gap: 1rem;
        margin-top: 1rem;
    }
    
    .facebook-comments-section {
        background: white;
        border-radius: 12px;
        padding: 1.5rem;
        margin-bottom: 2rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    
    .facebook-comments-section h3 {
        color: #2c3e50;
        margin-bottom: 1rem;
    }
    
    .fb-comments-mockup {
        border: 1px solid #e9ecef;
        border-radius: 8px;
        overflow: hidden;
    }
    
    .fb-header {
        background: #f8f9fa;
        padding: 1rem;
        display: flex;
        justify-content: space-between;
        border-bottom: 1px solid #e9ecef;
    }
    
    .fb-count {
        color: #6c757d;
        font-size: 0.9rem;
    }
    
    .fb-login-prompt {
        padding: 1.5rem;
        text-align: center;
        background: #f8f9fa;
    }
    
    .fb-login-btn {
        background: #1877f2;
        color: white;
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 600;
    }
    
    .fb-comments-preview {
        padding: 1rem;
    }
    
    .fb-comment {
        display: flex;
        gap: 0.75rem;
        margin-bottom: 1rem;
    }
    
    .fb-avatar {
        width: 32px;
        height: 32px;
        background: #e9ecef;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    
    .fb-comment-content strong {
        color: #1877f2;
        font-size: 0.9rem;
    }
    
    .fb-comment-content p {
        margin: 0.25rem 0;
        font-size: 0.9rem;
    }
    
    .fb-comment-actions {
        font-size: 0.8rem;
        color: #65676b;
    }
    
    .fb-comment-actions span {
        cursor: pointer;
        margin-right: 0.5rem;
    }
    
    .local-comments {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }
    
    .comment-card {
        background: white;
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    
    .comment-header {
        display: flex;
        align-items: center;
        gap: 1rem;
        margin-bottom: 1rem;
    }
    
    .comment-avatar img {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        object-fit: cover;
    }
    
    .comment-info h5 {
        margin: 0;
        color: #2c3e50;
    }
    
    .comment-time {
        font-size: 0.8rem;
        color: #6c757d;
    }
    
    .comment-content p {
        margin: 0;
        line-height: 1.5;
    }
    
    .comment-actions {
        display: flex;
        gap: 1rem;
        margin-top: 1rem;
    }
    
    /* Botones */
    .btn-primary {
        background: #3498db;
        color: white;
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 500;
        transition: background 0.2s;
    }
    
    .btn-primary:hover {
        background: #2980b9;
    }
    
    .btn-secondary {
        background: #6c757d;
        color: white;
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 500;
    }
    
    .btn-link {
        background: none;
        border: none;
        color: #3498db;
        cursor: pointer;
        text-decoration: underline;
    }
    
    .btn-like {
        background: none;
        border: 1px solid #dee2e6;
        padding: 0.5rem 1rem;
        border-radius: 20px;
        cursor: pointer;
        font-size: 0.85rem;
        transition: all 0.2s;
    }
    
    .btn-like:hover {
        background: #f8f9fa;
    }
    
    .btn-like.liked {
        background: #e3f2fd;
        border-color: #2196f3;
        color: #1976d2;
    }
    
    .btn-reply {
        background: none;
        border: 1px solid #dee2e6;
        padding: 0.5rem 1rem;
        border-radius: 20px;
        cursor: pointer;
        font-size: 0.85rem;
    }
    
    .filter-select {
        padding: 0.5rem 1rem;
        border: 1px solid #dee2e6;
        border-radius: 6px;
        background: white;
    }
</style>

@code {
    // Estad√≠sticas
    private int profesoresCount = 0;
    private int materiasCount = 0;
    private int comentariosCount = 0;
    private int evaluacionesCount = 0;

    // Profesores
    private List<Profesor> profesores = new();
    private bool mostrarTodosProfesores = false;

    // Materias
    private List<Materia> materias = new();
    private List<Materia> materiasFiltradas = new();

    // Comentarios
    private List<Comentario> comentarios = new();
    private bool mostrarFormComentario = false;
    private string nuevoComentario = "";

    protected override async Task OnInitializedAsync()
    {
        await CargarDatosComunidad();
    }

    private async Task CargarDatosComunidad()
    {
        await Task.Delay(500); // Simular carga

        var random = new Random();
        
        // Estad√≠sticas
        profesoresCount = random.Next(45, 85);
        materiasCount = random.Next(120, 180);
        comentariosCount = random.Next(25, 60);
        evaluacionesCount = random.Next(200, 400);

        // Cargar profesores
        profesores = new List<Profesor>
        {
            new Profesor { Id = 1, Nombre = "Dr. Ana Garc√≠a", Titulo = "Doctora en Ingenier√≠a Civil", Avatar = "https://via.placeholder.com/60", EnLinea = true, Rating = 5, NumeroEvaluaciones = 45, Materias = new List<string> { "Estructuras", "Concreto", "Dise√±o S√≠smico" } },
            new Profesor { Id = 2, Nombre = "Ing. Carlos Mendoza", Titulo = "Maestro en Ingenier√≠a Mec√°nica", Avatar = "https://via.placeholder.com/60", EnLinea = false, Rating = 4, NumeroEvaluaciones = 32, Materias = new List<string> { "Termodin√°mica", "Mec√°nica de Fluidos" } },
            new Profesor { Id = 3, Nombre = "Dra. Laura Rodr√≠guez", Titulo = "Doctora en Ingenier√≠a Industrial", Avatar = "https://via.placeholder.com/60", EnLinea = true, Rating = 5, NumeroEvaluaciones = 67, Materias = new List<string> { "Investigaci√≥n de Operaciones", "Control de Calidad", "Lean Manufacturing" } },
            new Profesor { Id = 4, Nombre = "Ing. Roberto Silva", Titulo = "Maestro en Ingenier√≠a El√©ctrica", Avatar = "https://via.placeholder.com/60", EnLinea = true, Rating = 4, NumeroEvaluaciones = 28, Materias = new List<string> { "Circuitos", "Electr√≥nica", "Control Autom√°tico" } },
            new Profesor { Id = 5, Nombre = "Dr. Patricia L√≥pez", Titulo = "Doctora en Matem√°ticas Aplicadas", Avatar = "https://via.placeholder.com/60", EnLinea = false, Rating = 5, NumeroEvaluaciones = 89, Materias = new List<string> { "C√°lculo Diferencial", "√Ålgebra Lineal", "Ecuaciones Diferenciales" } },
            new Profesor { Id = 6, Nombre = "Ing. Miguel Torres", Titulo = "Maestro en Ingenier√≠a Civil", Avatar = "https://via.placeholder.com/60", EnLinea = true, Rating = 4, NumeroEvaluaciones = 41, Materias = new List<string> { "Hidr√°ulica", "Geotecnia" } },
            new Profesor { Id = 7, Nombre = "Dra. Carmen Jim√©nez", Titulo = "Doctora en Ingenier√≠a Qu√≠mica", Avatar = "https://via.placeholder.com/60", EnLinea = false, Rating = 5, NumeroEvaluaciones = 53, Materias = new List<string> { "Qu√≠mica Org√°nica", "Procesos Industriales", "Cat√°lisis" } },
            new Profesor { Id = 8, Nombre = "Ing. Fernando Vega", Titulo = "Maestro en Sistemas Computacionales", Avatar = "https://via.placeholder.com/60", EnLinea = true, Rating = 4, NumeroEvaluaciones = 36, Materias = new List<string> { "Programaci√≥n", "Base de Datos", "Redes" } }
        };

        // Cargar materias
        materias = new List<Materia>
        {
            new Materia { Id = 1, Nombre = "An√°lisis Estructural", Codigo = "IC-301", Carrera = "Ingenier√≠a Civil", Profesores = new List<string> { "Dr. Ana Garc√≠a", "Ing. Miguel Torres" }, NumeroEstudiantes = 45, Rating = 4.5m },
            new Materia { Id = 2, Nombre = "Termodin√°mica I", Codigo = "IM-201", Carrera = "Ingenier√≠a Mec√°nica", Profesores = new List<string> { "Ing. Carlos Mendoza" }, NumeroEstudiantes = 38, Rating = 4.2m },
            new Materia { Id = 3, Nombre = "Investigaci√≥n de Operaciones", Codigo = "II-401", Carrera = "Ingenier√≠a Industrial", Profesores = new List<string> { "Dra. Laura Rodr√≠guez" }, NumeroEstudiantes = 52, Rating = 4.8m },
            new Materia { Id = 4, Nombre = "Circuitos El√©ctricos", Codigo = "IE-101", Carrera = "Ingenier√≠a El√©ctrica", Profesores = new List<string> { "Ing. Roberto Silva" }, NumeroEstudiantes = 41, Rating = 4.3m },
            new Materia { Id = 5, Nombre = "C√°lculo Diferencial", Codigo = "MT-101", Carrera = "Ingenier√≠a Civil", Profesores = new List<string> { "Dr. Patricia L√≥pez" }, NumeroEstudiantes = 67, Rating = 4.6m },
            new Materia { Id = 6, Nombre = "Mec√°nica de Fluidos", Codigo = "IM-301", Carrera = "Ingenier√≠a Mec√°nica", Profesores = new List<string> { "Ing. Carlos Mendoza" }, NumeroEstudiantes = 33, Rating = 4.1m }
        };

        materiasFiltradas = materias;

        // Cargar comentarios
        comentarios = new List<Comentario>
        {
            new Comentario { Id = 1, Autor = "Dr. Ana Garc√≠a", Avatar = "https://via.placeholder.com/40", Contenido = "¬°Bienvenidos al nuevo semestre! Espero que tengamos un excelente per√≠odo acad√©mico lleno de aprendizaje y colaboraci√≥n.", Fecha = DateTime.Now.AddHours(-2), Likes = 12, MeGusta = false },
            new Comentario { Id = 2, Autor = "Ing. Carlos Mendoza", Avatar = "https://via.placeholder.com/40", Contenido = "¬øAlguien ha trabajado con el nuevo software de simulaci√≥n t√©rmica? Me gustar√≠a intercambiar experiencias.", Fecha = DateTime.Now.AddHours(-5), Likes = 8, MeGusta = true },
            new Comentario { Id = 3, Autor = "Dra. Laura Rodr√≠guez", Avatar = "https://via.placeholder.com/40", Contenido = "Compartiendo algunos recursos √∫tiles para la optimizaci√≥n de procesos industriales. Los subir√© al repositorio com√∫n.", Fecha = DateTime.Now.AddDays(-1), Likes = 15, MeGusta = false },
            new Comentario { Id = 4, Autor = "Ing. Roberto Silva", Avatar = "https://via.placeholder.com/40", Contenido = "Recordatorio: La conferencia sobre energ√≠as renovables es ma√±ana a las 10:00 AM en el auditorio principal.", Fecha = DateTime.Now.AddDays(-2), Likes = 6, MeGusta = false }
        };
    }

    private void ToggleProfesores()
    {
        mostrarTodosProfesores = !mostrarTodosProfesores;
    }

    private void SeleccionarProfesor(Profesor profesor)
    {
        // Aqu√≠ podr√≠as navegar a la p√°gina del profesor o mostrar m√°s detalles
        Console.WriteLine($"Profesor seleccionado: {profesor.Nombre}");
    }

    private void FiltrarMaterias(ChangeEventArgs e)
    {
        var filtro = e.Value?.ToString();
        if (string.IsNullOrEmpty(filtro))
        {
            materiasFiltradas = materias;
        }
        else
        {
            materiasFiltradas = materias.Where(m => m.Carrera == filtro).ToList();
        }
    }

    private void MostrarFormularioComentario()
    {
        mostrarFormComentario = true;
        nuevoComentario = "";
    }

    private void CancelarComentario()
    {
        mostrarFormComentario = false;
        nuevoComentario = "";
    }

    private async Task PublicarComentario()
    {
        if (!string.IsNullOrWhiteSpace(nuevoComentario))
        {
            var comentario = new Comentario
            {
                Id = comentarios.Count + 1,
                Autor = "Usuario Actual", // En una app real, obtener del contexto de usuario
                Avatar = "https://via.placeholder.com/40",
                Contenido = nuevoComentario,
                Fecha = DateTime.Now,
                Likes = 0,
                MeGusta = false
            };

            comentarios.Insert(0, comentario);
            mostrarFormComentario = false;
            nuevoComentario = "";
            
            await Task.Delay(100); // Simular guardado
            StateHasChanged();
        }
    }

    private void ToggleLike(Comentario comentario)
    {
        comentario.MeGusta = !comentario.MeGusta;
        comentario.Likes += comentario.MeGusta ? 1 : -1;
    }

    private void ResponderComentario(Comentario comentario)
    {
        // Implementar l√≥gica de respuesta
        Console.WriteLine($"Responder a: {comentario.Autor}");
    }

    // Clases de modelo
    public class Profesor
    {
        public int Id { get; set; }
        public string Nombre { get; set; } = "";
        public string Titulo { get; set; } = "";
        public string Avatar { get; set; } = "";
        public bool EnLinea { get; set; }
        public int Rating { get; set; }
        public int NumeroEvaluaciones { get; set; }
        public List<string> Materias { get; set; } = new();
    }

    public class Materia
    {
        public int Id { get; set; }
        public string Nombre { get; set; } = "";
        public string Codigo { get; set; } = "";
        public string Carrera { get; set; } = "";
        public List<string> Profesores { get; set; } = new();
        public int NumeroEstudiantes { get; set; }
        public decimal Rating { get; set; }
    }

    public class Comentario
    {
        public int Id { get; set; }
        public string Autor { get; set; } = "";
        public string Avatar { get; set; } = "";
        public string Contenido { get; set; } = "";
        public DateTime Fecha { get; set; }
        public int Likes { get; set; }
        public bool MeGusta { get; set; }
    }
}